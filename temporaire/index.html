<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail Fournisseur EECIE</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="manifest" href="/manifest.json">

</head>

<body>

    <!-- Écran de Connexion (visible par défaut) -->
    <div id="login-screen" class="screen active">
        <h2>Portail Fournisseur</h2>
        <form id="login-form">
            <input type="text" id="username" placeholder="Nom d'utilisateur" required>
            <input type="password" id="password" placeholder="Mot de passe" required>
            <button type="submit">Connexion</button>
            <p id="login-error" class="error-message"></p>
        </form>
    </div>

    <!-- Écran des Missions (caché) -->
    <div id="jobs-screen" class="screen">
    <header>
        <h2>Mes Interventions</h2>
        <button id="logout-btn">Déconnexion</button>
    </header>

    <!-- NOUVELLE STRUCTURE D'ONGLETS -->
    <div class="tabs-container">
        <button id="tab-today" class="tab-button active">Aujourd'hui</button>
        <button id="tab-future" class="tab-button">À venir</button>
    </div>

    <!-- PANNEAU POUR LES INTERVENTIONS DU JOUR -->
    <div id="jobs-list-today" class="jobs-list-panel active">
        <!-- Le contenu sera injecté par JavaScript -->
    </div>

    <!-- PANNEAU POUR LES INTERVENTIONS FUTURES -->
    <div id="jobs-list-future" class="jobs-list-panel">
        <!-- Le contenu sera injecté par JavaScript -->
    </div>
</div>

<div id="report-screen" class="screen">
    <header>
        <button id="back-to-jobs-btn" class="header-btn">← Retour</button>
        <h2 id="report-title">Rapport d'intervention</h2>
    </header>

    <!-- Section des Détails (inchangée, mais on utilise sa classe "card") -->
    <div class="card details-card">
        <h3>Détails de l'intervention</h3>
        <div class="details-grid">
            <span>Client :</span><strong id="report-client-name"></strong>
            <span>Adresse :</span><strong id="report-client-address"></strong>
        </div>
    </div>

    <!-- Section des Travaux prévus -->
    <div class="card articles-card">
        <h3>Travaux prévus</h3>
        <div class="articles-table" id="initial-articles-list">
            <!-- Contenu injecté par JS -->
        </div>
    </div>

    <!-- Section des Ajouts -->
    <div class="card add-article-card">
        <h3>Ajouts de dernière minute</h3>
        <div class="articles-table" id="added-articles-list">
            <!-- Contenu injecté par JS -->
        </div>
        <form id="add-article-form" class="add-form">
                <input type="text" id="article-name" placeholder="Nom matériel/prestation" required>
                <div class="form-row">
                    <input type="number" id="article-qty" placeholder="Qté" value="1" min="0.1" step="0.1" required>
                    <input type="number" id="article-price" placeholder="Prix Unitaire" min="0" step="0.01" required>
                    <button type="submit">➕</button>
                </div>
            </form>
        <div class="total-section">
            <strong>Total des ajouts :</strong>
            <span id="added-total">0.00 €</span>
        </div>
        <div class="total-section grand-total">
            <strong>Nouveau Total HT :</strong>
            <span id="nouveau-total-ht">0.00 €</span>
        </div>
    </div>

    <!-- Section Notes et Signature -->
    <div class="card signature-card">
        <h3>Notes et Signature</h3>
        <textarea id="report-notes" placeholder="Notes complémentaires..."></textarea>
        <p class="signature-label">Signature du Client :</p>
        <div id="signature-pad">
            <!-- Contenu injecté par JS -->
        </div>
    </div>

    <button id="submit-report-btn" class="button-primary btn-full">Soumettre le Rapport Signé</button>
    <button id="modify-report-btn" class="btn-secondary btn-full" style="display: none; margin-top: 10px;">Modifier le Rapport</button>
    <button id="cloturer-dossier-btn" class="btn-success btn-full" style="display: none; margin-top: 10px;">✅ Clôturer le Dossier</button>
</div>
  

    <!-- Le script app.js peut rester relatif, mais c'est plus propre comme ça -->
    <script src="/app.js"></script>
    <meta name="theme-color" content="#333" />
</body>

</html>